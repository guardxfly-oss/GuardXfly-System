<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System GuardXfly</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff0000" />
    <link rel="icon" href="1.png" type="image/jpeg">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            text-decoration: none !important;
        }
        
        body {
            background: linear-gradient(45deg, #000000 0%, #333333 50%, #666666 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #eee;
            position: relative;
            overflow-x: hidden;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(255, 0, 0, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(0, 0, 0, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(255, 0, 0, 0.2) 0%, transparent 50%);
            z-index: -1;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(25px);
            border-radius: 25px;
            border: 1px solid rgba(255, 0, 0, 0.5);
            box-shadow: 
                0 25px 45px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 0, 0, 0.3);
            overflow: hidden;
            z-index: 1;
            position: relative;
            animation: floatGently 6s ease-in-out infinite;
        }
        
        @keyframes floatGently {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .header {
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            backdrop-filter: blur(20px);
            color: rgb(255, 255, 255);
            padding: 25px;
            text-align: center;
            position: relative;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .install-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .install-btn:hover {
            transform: scale(1.1);
        }
        
        .logo {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
            to { text-shadow: 0 0 30px rgba(255, 0, 0, 0.8); }
        }
        
        .main-card {
            padding: 30px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(15px);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 25px;
            color: #eee;
            font-size: 22px;
            position: relative;
            padding-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #eee;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid rgba(255, 0, 0, 0.3);
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            color: #eee;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: rgba(255, 0, 0, 0.6);
            background: rgba(0, 0, 0, 0.4);
            box-shadow: 
                0 0 0 3px rgba(255, 0, 0, 0.2),
                0 5px 15px rgba(255, 0, 0, 0.3);
            transform: translateY(-2px);
        }
        
        textarea {
            resize: none; /* Ù…Ù†Ø¹ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙŠØ¯ÙˆÙŠ */
            overflow-y: hidden; /* Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ */
            min-height: 120px; /* ØªØ­Ø¯ÙŠØ¯ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø¨Ø¯Ø¦ÙŠ Ù…Ù†Ø§Ø³Ø¨ */
            transition: height 0.2s ease; /* Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ© Ù†Ø§Ø¹Ù…Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ */
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .btn-checkin {
            background: linear-gradient(135deg, #00cc00 0%, #009900 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 204, 0, 0.3);
        }
        
        .btn-checkout {
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }
        
        .btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.2),
                0 0 30px rgba(255, 255, 255, 0.1);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .message.show {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }
        
        .message.success {
            background: rgba(0, 204, 0, 0.1);
            color: #00cc00;
            border-color: rgba(0, 204, 0, 0.3);
        }
        
        .message.error {
            background: rgba(255, 0, 0, 0.1);
            color: #ff0000;
            border-color: rgba(255, 0, 0, 0.3);
        }
        
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #333333; /* Ù†ÙØ³ Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        #loading-overlay img {
            width: 200px;
            height: 200px;
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
            border-radius: 50%; /* Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¯Ø§Ø¦Ø±ÙŠØ© */
            object-fit: cover; /* Ù„Ø¶Ù…Ø§Ù† Ù…Ù„Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© */
            border: 3px solid rgba(255, 0, 0, 0.5); /* Ø¥Ø¶Ø§ÙØ© Ø¥Ø·Ø§Ø± Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© */
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.4), /* Ø¥Ø¶Ø§ÙØ© ØªÙˆÙ‡Ø¬ */
                        0 0 60px rgba(0, 0, 0, 0.5);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .success-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 4s forwards;
        }
        
        .success-animation img {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.3),
                0 0 60px rgba(255, 255, 255, 0.5);
            object-fit: cover;
            animation: bounce 1s ease-in-out infinite;
        }

        .success-animation h2 {
            color: #00cc00;
            margin-top: 20px;
            text-align: center;
            font-size: 24px;
            text-shadow: 0 2px 10px rgba(0, 204, 0, 0.5);
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .file-input-container {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-input-label {
            display: block;
            width: 100%;
            padding: 15px;
            border: 1px solid rgba(255, 0, 0, 0.3);
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            color: #eee;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-input-label:hover {
            border-color: rgba(255, 0, 0, 0.6);
            background: rgba(0, 0, 0, 0.4);
            box-shadow: 
                0 0 0 3px rgba(255, 0, 0, 0.2),
                0 5px 15px rgba(255, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .file-input-label::before {
            content: 'ğŸ“ ';
            display: inline-block;
            margin-right: 8px;
            vertical-align: middle;
        }

        .file-input-label.has-file::before {
            content: 'âœ… ';
        }

        #taskPhoto {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .hidden {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        /* --- Install Prompt Modal --- */
        #install-prompt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }
        #install-prompt-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .install-prompt-modal {
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            border-radius: 25px;
            border: 1px solid rgba(255, 0, 0, 0.5);
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            transform: scale(0.9);
            transition: transform 0.4s ease;
        }
        #install-prompt-overlay.show .install-prompt-modal {
            transform: scale(1);
        }
        .install-prompt-modal img {
            width: 80px;
            height: 80px;
            margin-bottom: 15px;
        }
        .install-prompt-modal h2 {
            color: #eee;
            margin-bottom: 10px;
        }
        .install-prompt-modal p {
            color: #ccc;
            margin-bottom: 25px;
            font-size: 16px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <img src="https://i.pinimg.com/originals/a9/78/f0/a978f0f468660c3606ae57e635f0e3fe.gif" alt="Ø´Ø¹Ø§Ø± GuardXfly">
    </div>
    <div id="install-prompt-overlay">
        <div class="install-prompt-modal">
            <img src="1.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚">
            <h2>ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h2>
            <p>Ø«Ø¨Ù‘Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ ÙˆØ§Ù„Ø¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</p>
            <div class="btn-group">
                <button id="installAppBtn" class="btn btn-checkin">ğŸ“² ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¢Ù†</button>
                <button id="laterBtn" class="btn btn-checkout">Ù„Ø§Ø­Ù‚Ù‹Ø§</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <button id="installBtn" class="install-btn">ğŸ“² ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
            <div class="logo">System GuardXfly</div>
            <div class="subtitle">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù</div>
        </div>

        <div class="main-card">
            <div class="login-section">
                <h2 class="section-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù</h2>
                <div style="text-align: center; margin-bottom: 15px;">
                    <img src="https://i.pinimg.com/originals/de/05/62/de0562e878a0311809c7f4325b6fcc85.gif" alt="Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø­Ø¶ÙˆØ±" style="width: 50px; height: 50px; border-radius: 50%;">
                </div>
                <form id="attendanceForm">
                    <div class="form-group">
                        <label for="employeeId">Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
                        <input type="text" id="employeeId" name="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…Ùƒ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="employeeName">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
                        <input type="text" id="employeeName" name="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="department">Ø§Ù„Ù‚Ø³Ù…</label>
                        <select id="department" name="Ø§Ù„Ù‚Ø³Ù…" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                            <option value="Ù…Ø§Ø±ÙƒØªÙŠØ±">Ù…Ø§Ø±ÙƒØªÙŠØ±</option>
                            <option value="Ù…Ø§Ù†Ø¬Ø±">Ù…Ø§Ù†Ø¬Ø±</option>
                            <option value="Ø¨ÙŠØ²Ù†Ø³ Ø¯ÙŠÙÙ„Ø¨Ø±">Ø¨ÙŠØ²Ù†Ø³ Ø¯ÙŠÙÙ„Ø¨Ø±</option>
                            <option value="Ù…ÙˆÙ†ØªÙŠØ± / Ø¯ÙŠÙÙˆÙ„Ø¨Ø±">Ù…ÙˆÙ†ØªÙŠØ± / Ø¯ÙŠÙÙˆÙ„Ø¨Ø±</option>
                            <option value="Ø¯ÙŠØ²Ø§ÙŠÙ†Ø±">Ø¯ÙŠØ²Ø§ÙŠÙ†Ø±</option>
                            <option value="Ù…ÙˆØ¯Ø±ÙŠØ´Ù†">Ù…ÙˆØ¯Ø±ÙŠØ´Ù†</option>
                            <option value="Ø³ÙŠÙ„Ø²">Ø³ÙŠÙ„Ø²</option>
                            <option value="ÙƒÙˆÙ„ Ø³Ù†ØªØ±">ÙƒÙˆÙ„ Ø³Ù†ØªØ±</option>
                        </select>
                    </div>

                    <div class="location-permission">
                        <div class="location-status">
                            <span class="location-icon" id="locationIcon">ğŸ“</span>
                            <span class="location-text" id="locationText">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„ØªØ³Ø¬ÙŠÙ„</span>
                        </div>
                        <div class="location-coordinates" id="locationCoordinates"></div>
                        <button type="button" class="btn" id="enableLocationBtn" style="margin-top: 10px; background: linear-gradient(135deg, #ff9900 0%, #ff6600 100%);">
                            ğŸ“ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹
                        </button>
                    </div>

                    <div class="btn-group">
                        <button type="button" class="btn btn-checkin" id="checkinBtn" disabled>
                            âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±
                        </button>
                        <button type="button" class="btn btn-checkout" id="checkoutBtn" disabled>
                            ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù
                        </button>
                    </div>
                </form>

                <div id="message" class="message"></div>
            </div>
        </div>

        <div class="main-card">
            <div class="task-section">
                <h2 class="section-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ù†Ø¬Ø²Ø©</h2>
                <div style="text-align: center; margin-bottom: 15px;">
                    <img src="https://i.pinimg.com/originals/f7/a7/37/f7a737bf63222fbf1eab122722dead5a.gif" alt="Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù‡Ø§Ù…" style="width: 50px; height: 50px; border-radius: 50%;">
                </div>
                <form id="taskForm">
                    <div class="form-group">
                        <label for="taskEmployeeName">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
                        <input type="text" id="taskEmployeeName" name="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDepartment">Ø§Ù„Ù‚Ø³Ù…</label>
                        <select id="taskDepartment" name="Ø§Ù„Ù‚Ø³Ù…" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                            <option value="Ù…Ø§Ø±ÙƒØªÙŠØ±">Ù…Ø§Ø±ÙƒØªÙŠØ±</option>
                            <option value="Ù…Ø§Ù†Ø¬Ø±">Ù…Ø§Ù†Ø¬Ø±</option>
                            <option value="Ø¨ÙŠØ²Ù†Ø³ Ø¯ÙŠÙÙ„Ø¨Ø±">Ø¨ÙŠØ²Ù†Ø³ Ø¯ÙŠÙÙ„Ø¨Ø±</option>
                            <option value="Ù…ÙˆÙ†ØªÙŠØ± / Ø¯ÙŠÙÙˆÙ„Ø¨Ø±">Ù…ÙˆÙ†ØªÙŠØ± / Ø¯ÙŠÙÙˆÙ„Ø¨Ø±</option>
                            <option value="Ø¯ÙŠØ²Ø§ÙŠÙ†Ø±">Ø¯ÙŠØ²Ø§ÙŠÙ†Ø±</option>
                            <option value="Ù…ÙˆØ¯Ø±ÙŠØ´Ù†">Ù…ÙˆØ¯Ø±ÙŠØ´Ù†</option>
                            <option value="Ø³ÙŠÙ„Ø²">Ø³ÙŠÙ„Ø²</option>
                            <option value="ÙƒÙˆÙ„ Ø³Ù†ØªØ±">ÙƒÙˆÙ„ Ø³Ù†ØªØ±</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©</label>
                        <textarea id="taskDescription" name="ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©" placeholder="Ø§ÙƒØªØ¨ ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø© Ù‡Ù†Ø§..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ (Ù…Ø«Ù„ Ø¬ÙˆØ¬Ù„ Ø¯Ø±Ø§ÙŠÙ)</label>
                        <div id="taskLinksContainer">
                            <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        </div>
                        <button type="button" id="addLinkBtn" class="btn" style="width: 100%; margin-top: 10px; background: linear-gradient(135deg, #6c757d 0%, #343a40 100%);">â• Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· Ø¢Ø®Ø±</button>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn" id="submitTaskBtn" style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
                    </div>
                </form>
                <div id="taskMessage" class="message"></div>
            </div>
        </div>

        <div class="main-card">
            <div class="complaint-section">
                <h2 class="section-title">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙŠ</h2>
                <div style="text-align: center; margin-bottom: 15px;">
                    <img src="https://i.pinimg.com/originals/a1/48/fe/a148feb684f37282cf647764cd828d25.gif" alt="Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰" style="width: 50px; height: 50px; border-radius: 50%;">
                </div>
                <form id="complaintForm">
                    <div class="form-group">
                        <label for="complaintEmployeeName">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
                        <input type="text" id="complaintEmployeeName" name="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù" required>
                    </div>
                    <div class="form-group">
                        <label for="complaintDepartment">Ø§Ù„Ù‚Ø³Ù…</label>
                        <select id="complaintDepartment" name="Ø§Ù„Ù‚Ø³Ù…" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                            <option value="Ù…Ø§Ø±ÙƒØªÙŠØ±">Ù…Ø§Ø±ÙƒØªÙŠØ±</option>
                            <option value="Ù…Ø§Ù†Ø¬Ø±">Ù…Ø§Ù†Ø¬Ø±</option>
                            <option value="Ø¨ÙŠØ²Ù†Ø³ Ø¯ÙŠÙÙ„Ø¨Ø±">Ø¨ÙŠØ²Ù†Ø³ Ø¯ÙŠÙÙ„Ø¨Ø±</option>
                            <option value="Ù…ÙˆÙ†ØªÙŠØ± / Ø¯ÙŠÙÙˆÙ„Ø¨Ø±">Ù…ÙˆÙ†ØªÙŠØ± / Ø¯ÙŠÙÙˆÙ„Ø¨Ø±</option>
                            <option value="Ø¯ÙŠØ²Ø§ÙŠÙ†Ø±">Ø¯ÙŠØ²Ø§ÙŠÙ†Ø±</option>
                            <option value="Ù…ÙˆØ¯Ø±ÙŠØ´Ù†">Ù…ÙˆØ¯Ø±ÙŠØ´Ù†</option>
                            <option value="Ø³ÙŠÙ„Ø²">Ø³ÙŠÙ„Ø²</option>
                            <option value="ÙƒÙˆÙ„ Ø³Ù†ØªØ±">ÙƒÙˆÙ„ Ø³Ù†ØªØ±</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="complaintDescription">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ùˆ Ø§Ù„Ø´ÙƒÙˆÙ‰</label>
                        <textarea id="complaintDescription" name="Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ùˆ Ø§Ù„Ø´ÙƒÙˆÙ‰" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ø£Ùˆ Ø´ÙƒÙˆØ§Ùƒ Ù‡Ù†Ø§..." required></textarea>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn" id="submitComplaintBtn" style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: #212529; box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);">ğŸ“ Ø¥Ø±Ø³Ø§Ù„</button>
                    </div>
                </form>
                <div id="complaintMessage" class="message"></div>
            </div>
        </div>
    </div>

    <style>
        .link-input-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }
        .link-input-wrapper input {
            flex-grow: 1;
        }
        .remove-link-btn {
            padding: 10px 15px;
            flex-shrink: 0;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            min-width: 50px;
        }
    </style>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª PWA
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
        const installPromptOverlay = document.getElementById('install-prompt-overlay');
        const installAppBtn = document.getElementById('installAppBtn');
        const laterBtn = document.getElementById('laterBtn');
                
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('beforeinstallprompt event fired');
            e.preventDefault();
            deferredPrompt = e;
            // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
            installBtn.style.visibility = 'visible';
            installBtn.style.opacity = '1';
        });

        installBtn.addEventListener('click', () => {
            if (deferredPrompt) {
                installPromptOverlay.classList.add('show');
            }
        });

        installAppBtn.addEventListener('click', () => {
            installPromptOverlay.classList.remove('show');
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚');
                }
                deferredPrompt = null;
            });
        });

        laterBtn.addEventListener('click', () => {
            installPromptOverlay.classList.remove('show');
        });

        // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¨Ø²Ø± Ø§Ù„ÙØ£Ø±Ø© Ø§Ù„Ø£ÙŠÙ…Ù†
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            alert('Ø§Ù„Ù†Ù‚Ø± Ø¨Ø§Ù„Ø²Ø± Ø§Ù„Ø£ÙŠÙ…Ù† Ù…Ø¹Ø·Ù„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù….');
        });

        // ØªØ¹Ø·ÙŠÙ„ Ù…ÙØ§ØªÙŠØ­ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·ÙˆØ±
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || (e.ctrlKey && e.key === 'u')) {
                e.preventDefault();
                alert('Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù….');
            }
        });

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹
        let userLocation = null;
        let locationWatchId = null;
        const enableLocationBtn = document.getElementById('enableLocationBtn');
        const locationIcon = document.getElementById('locationIcon');
        const locationText = document.getElementById('locationText');
        const locationCoordinates = document.getElementById('locationCoordinates');
        const checkinBtn = document.getElementById('checkinBtn');
        const checkoutBtn = document.getElementById('checkoutBtn');

        // Ø¯Ø§Ù„Ø© Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function enableLocation() {
            if (!navigator.geolocation) {
                showMessage('Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø®Ø¯Ù… Ø®Ø¯Ù…Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹', 'error');
                return;
            }

            enableLocationBtn.disabled = true;
            enableLocationBtn.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...';
            locationIcon.textContent = 'ğŸ”„';
            locationText.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...';

            // Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹
            navigator.geolocation.getCurrentPosition(
                locationSuccess,
                locationError,
                { 
                    enableHighAccuracy: true, 
                    timeout: 10000, 
                    maximumAge: 0 
                }
            );

            // Ø¨Ø¯Ø¡ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªÙ…Ø±
            if (locationWatchId !== null) {
                navigator.geolocation.clearWatch(locationWatchId);
            }

            locationWatchId = navigator.geolocation.watchPosition(
                locationUpdate,
                locationError,
                { 
                    enableHighAccuracy: true, 
                    timeout: 10000, 
                    maximumAge: 0 
                }
            );
        }

        // Ù†Ø¬Ø§Ø­ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        async function locationSuccess(position) {
            userLocation = {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
                accuracy: position.coords.accuracy,
                timestamp: new Date().toISOString(),
                address: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©...'
            };

            locationIcon.textContent = 'âœ…';
            locationText.textContent = 'ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­';
            locationCoordinates.textContent = userLocation.address;
            
            enableLocationBtn.textContent = 'ğŸ“ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹';
            enableLocationBtn.disabled = false;
            
            // ØªÙØ¹ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
            checkinBtn.disabled = false;
            checkoutBtn.disabled = false;

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡ ÙˆØ¹Ø±Ø¶Ù‡
            userLocation.address = await getReadableAddress(userLocation.latitude, userLocation.longitude);
            locationCoordinates.textContent = userLocation.address;
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function locationUpdate(position) {
            userLocation = {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
                accuracy: position.coords.accuracy,
                timestamp: new Date().toISOString(),
                address: userLocation.address // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø­ØªÙ‰ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡
            };

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯Ù‚Ø© ÙÙ‚Ø· Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©
            locationCoordinates.textContent = `${userLocation.address} (Ø¯Ù‚Ø©: Â±${userLocation.accuracy.toFixed(2)} Ù…ØªØ±)`;
        }

        // Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function locationError(error) {
            enableLocationBtn.disabled = false;
            enableLocationBtn.textContent = 'ğŸ“ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹';
            
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    locationIcon.textContent = 'âŒ';
                    locationText.textContent = 'ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹';
                    locationCoordinates.textContent = 'ÙŠØ±Ø¬Ù‰ Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±';
                    showMessage('ÙŠØ¬Ø¨ Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±', 'error');
                    break;
                case error.POSITION_UNAVAILABLE:
                    locationIcon.textContent = 'âŒ';
                    locationText.textContent = 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©';
                    locationCoordinates.textContent = 'ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ';
                    showMessage('ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹', 'error');
                    break;
                case error.TIMEOUT:
                    locationIcon.textContent = 'â±ï¸';
                    locationText.textContent = 'Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹';
                    locationCoordinates.textContent = 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
                    showMessage('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', 'error');
                    break;
                default:
                    locationIcon.textContent = 'âŒ';
                    locationText.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    locationCoordinates.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹';
                    showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹', 'error');
                    break;
            }

            // ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
            checkinBtn.disabled = true;
            checkoutBtn.disabled = true;
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø­Ø¯Ø« Ù„Ø²Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        enableLocationBtn.addEventListener('click', enableLocation);

        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ù…Ø³Ø§ÙØ© ---
        const COMPANY_LAT = 30.057826;
        const COMPANY_LON = 31.3355061;
        const DISTANCE_THRESHOLD_ONSITE = 50; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø§Ù„Ù…ØªØ± Ù„ÙŠØ¹ØªØ¨Ø± "ÙÙŠ Ù…Ù‚Ø± Ø§Ù„Ø´Ø±ÙƒØ©"
        const DISTANCE_THRESHOLD_NEARBY = 1000; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø§Ù„Ù…ØªØ± Ù„ÙŠØ¹ØªØ¨Ø± "Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø´Ø±ÙƒØ©"

        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ (Ø§Ù„Ø³ÙŠØ§Ø¬ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ) ---
        const WORK_AREA_LAT = 31.0955; // Ø®Ø· Ø¹Ø±Ø¶ Ù…Ø±ÙƒØ² Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ (Ø§Ù„ÙƒÙŠÙ„Ùˆ 21ØŒ Ø§Ù„Ø¹Ø¬Ù…ÙŠ)
        const WORK_AREA_LON = 29.7334; // Ø®Ø· Ø·ÙˆÙ„ Ù…Ø±ÙƒØ² Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„
        const WORK_AREA_RADIUS = 3000; // Ù†ØµÙ Ù‚Ø·Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù„Ø£Ù…ØªØ§Ø± (3 ÙƒÙŠÙ„ÙˆÙ…ØªØ±)

        const FORMSPREE_ENDPOINT = 'https://formspree.io/f/meoppdww';

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Formspree
        async function sendToFormspree(formData) {
            try {
                // Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                if (userLocation) {
                    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù‚Ø¯ ØªÙ… Ø¬Ù„Ø¨Ù‡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
                    if (userLocation.address === 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©...') {
                        userLocation.address = await getReadableAddress(userLocation.latitude, userLocation.longitude);
                    }
                    const userLat = userLocation.latitude;
                    const userLon = userLocation.longitude;
                    const locationStatus = getLocationStatus(userLat, userLon);
                    const workAreaStatus = getWorkAreaStatus(userLat, userLon);
                    formData.append('Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹', locationStatus);
                    formData.append('Ø­Ø§Ù„Ø© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„', workAreaStatus);
                }

                const response = await fetch(FORMSPREE_ENDPOINT, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    return true; // ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­
                } else {
                    console.error('Formspree error:', await response.json());
                    return false;
                }
            } catch (error) {
                console.error('Network error:', error);
                return false;
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ù†Ù‚Ø·ØªÙŠÙ† (Haversine formula)
        function getDistanceFromLatLonInMeters(lat1, lon1, lat2, lon2) {
            const R = 6371e3; // Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø£Ø±Ø¶ Ø¨Ø§Ù„Ø£Ù…ØªØ§Ø±
            const dLat = (lat2 - lat1) * (Math.PI / 180);
            const dLon = (lon2 - lon1) * (Math.PI / 180);
            const a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø§Ù„Ø£Ù…ØªØ§Ø±
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§ÙØ©
        function getLocationStatus(userLat, userLon) {
            if (!userLat || !userLon) {
                return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            }

            const distance = getDistanceFromLatLonInMeters(userLat, userLon, COMPANY_LAT, COMPANY_LON);

            if (distance <= DISTANCE_THRESHOLD_ONSITE) {
                return `âœ… ÙÙŠ Ù…Ù‚Ø± Ø§Ù„Ø´Ø±ÙƒØ© (Ù…Ø³Ø§ÙØ© ${distance.toFixed(0)} Ù…ØªØ±)`;
            } else if (distance <= DISTANCE_THRESHOLD_NEARBY) {
                return `ğŸŸ¡ Ù‚Ø±ÙŠØ¨ Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ© (Ù…Ø³Ø§ÙØ© ${distance.toFixed(0)} Ù…ØªØ±)`;
            } else {
                const distanceInKm = (distance / 1000).toFixed(2);
                return `ğŸ”´ Ø®Ø§Ø±Ø¬ Ù…Ù‚Ø± Ø§Ù„Ø´Ø±ÙƒØ© (Ù…Ø³Ø§ÙØ© ${distanceInKm} ÙƒÙ…)`;
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„
        function getWorkAreaStatus(userLat, userLon) {
            if (!userLat || !userLon) {
                return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            }

            const distance = getDistanceFromLatLonInMeters(userLat, userLon, WORK_AREA_LAT, WORK_AREA_LON);

            return distance <= WORK_AREA_RADIUS ? 'âœ… Ø¯Ø§Ø®Ù„ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„' : `ğŸ”´ Ø®Ø§Ø±Ø¬ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ (Ø¨Ø¹ÙŠØ¯ Ù…Ø³Ø§ÙØ© ${(distance / 1000).toFixed(2)} ÙƒÙ…)`;
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¥Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ù…Ù‚Ø±ÙˆØ¡
        async function getReadableAddress(lat, lon) {
            try {
                const response = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=ar`);
                if (!response.ok) {
                    return 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©';
                }
                const data = await response.json();
                // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: Ø§Ù„Ø­ÙŠØŒ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
                const address = [data.locality, data.city, data.principalSubdivision].filter(Boolean).join('ØŒ ');
                return address || 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            } catch (error) {
                return 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø¯Ù…Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹';
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ ØµÙˆØ±Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
        function showSuccessAnimation(type, message) {
            let gifUrl;
            let titleText;
            
            switch(type) {
                case 'checkin':
                    gifUrl = 'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif';
                    titleText = 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!';
                    break;
                case 'checkout':
                    gifUrl = 'https://i.pinimg.com/originals/85/35/46/853546ca4c9050eee517c7b803dcc9ae.gif';
                    titleText = 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø¨Ù†Ø¬Ø§Ø­!';
                    break;
                case 'task':
                    gifUrl = 'https://media.giphy.com/media/26u4lOMA8JKSnL9Uk/giphy.gif';
                    titleText = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!';
                    break;
                case 'complaint':
                    gifUrl = 'https://i.pinimg.com/originals/74/cc/be/74ccbec32fe85564ab6599488d7294ad.gif';
                    titleText = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!';
                    break;
                default:
                    gifUrl = 'https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif';
                    titleText = 'ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!';
            }

            const successOverlay = document.createElement('div');
            successOverlay.className = 'success-animation';
            successOverlay.innerHTML = `
                <img src="${gifUrl}" alt="Ù†Ø¬Ø­!" />
                <h2>${titleText}</h2>
            `;
            
            document.body.appendChild(successOverlay);
            
            setTimeout(() => {
                successOverlay.remove();
            }, 4000);
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        function validateAttendanceForm() {
            const employeeId = document.getElementById('employeeId').value.trim();
            const employeeName = document.getElementById('employeeName').value.trim();
            const department = document.getElementById('department').value;

            if (!employeeId || !employeeName || !department) {
                showMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return false;
            }

            if (!userLocation) {
                showMessage('ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙˆÙ„Ø§Ù‹ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±', 'error');
                return false;
            }

            return true;
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±
        async function checkIn() {
            if (!validateAttendanceForm()) return;

            const checkinBtn = document.getElementById('checkinBtn');
            checkinBtn.disabled = true;
            checkinBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...';

            try {
                const currentTime = new Date().toLocaleTimeString('ar-EG', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });
                const currentDate = new Date().toISOString().split('T')[0];
                const dayName = getArabicDayName(currentDate);

                const form = document.getElementById('attendanceForm');
                const formData = new FormData(form);
                
                formData.append('Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'Ø­Ø¶ÙˆØ±');
                formData.append('Ø§Ù„ØªØ§Ø±ÙŠØ®', currentDate);
                formData.append('Ø§Ù„ÙŠÙˆÙ…', dayName);
                formData.append('Ø§Ù„ÙˆÙ‚Øª', currentTime);
                formData.append('Ø¯Ù‚Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹', userLocation.accuracy);
                formData.append('ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', new Date().toISOString());
                formData.append('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†', userLocation.address);

                const success = await sendToFormspree(formData);

                if (success) {
                    showSuccessAnimation('checkin', `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ ${currentTime}`);
                    showMessage(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ ${currentTime}`, 'success');
                    saveUserData(formData.get('Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù'), formData.get('Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù'), formData.get('Ø§Ù„Ù‚Ø³Ù…'));
                    clearAttendanceForm();
                } else {
                    showMessage('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
            } finally {
                checkinBtn.disabled = false;
                checkinBtn.textContent = 'âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±';
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù
        async function checkOut() {
            if (!validateAttendanceForm()) return;

            const checkoutBtn = document.getElementById('checkoutBtn');
            checkoutBtn.disabled = true;
            checkoutBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...';

            try {
                const currentTime = new Date().toLocaleTimeString('ar-EG', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });
                const currentDate = new Date().toISOString().split('T')[0];
                const dayName = getArabicDayName(currentDate);

                const form = document.getElementById('attendanceForm');
                const formData = new FormData(form);

                formData.append('Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'Ø§Ù†ØµØ±Ø§Ù');
                formData.append('Ø§Ù„ØªØ§Ø±ÙŠØ®', currentDate);
                formData.append('Ø§Ù„ÙŠÙˆÙ…', dayName);
                formData.append('Ø§Ù„ÙˆÙ‚Øª', currentTime);
                formData.append('Ø¯Ù‚Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹', userLocation.accuracy);
                formData.append('ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', new Date().toISOString());
                formData.append('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†', userLocation.address);

                const success = await sendToFormspree(formData);

                if (success) {
                    showSuccessAnimation('checkout', `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ ${currentTime}`);
                    showMessage(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ ${currentTime}`, 'success');
                    saveUserData(formData.get('Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù'), formData.get('Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù'), formData.get('Ø§Ù„Ù‚Ø³Ù…'));
                    clearAttendanceForm();
                } else {
                    showMessage('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
            } finally {
                checkoutBtn.disabled = false;
                checkoutBtn.textContent = 'ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†ØµØ±Ø§Ù';
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…
        document.getElementById('taskForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const taskEmployeeName = document.getElementById('taskEmployeeName').value.trim();
            const taskDepartment = document.getElementById('taskDepartment').value;
            const taskDescription = document.getElementById('taskDescription').value.trim();
            
            if (!taskEmployeeName || !taskDepartment || !taskDescription) {
                showTaskMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }

            const submitBtn = document.getElementById('submitTaskBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

            try {
                const formData = new FormData(this);
                formData.append('ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', new Date().toISOString().split('T')[0]);
                formData.append('ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', new Date().toISOString());

                // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ù…Ù‡Ù…Ø©
                if (userLocation) {
                    formData.append('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†', userLocation.address);
                }

                const success = await sendToFormspree(formData);

                if (success) {
                    showSuccessAnimation('task');
                    saveUserData(null, formData.get('Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù'), formData.get('Ø§Ù„Ù‚Ø³Ù…')); // Ù†Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù‚Ø³Ù… Ù…Ù† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù‡Ø§Ù…
                    clearTaskForm();
                }
            } catch (error) {
                console.error('Error:', error);
                showTaskMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©';
            }
        });

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰
        document.getElementById('complaintForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const complaintEmployeeName = document.getElementById('complaintEmployeeName').value.trim();
            const complaintDepartment = document.getElementById('complaintDepartment').value;
            const complaintDescription = document.getElementById('complaintDescription').value.trim();

            if (!complaintEmployeeName || !complaintDepartment || !complaintDescription) {
                showComplaintMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }

            const submitBtn = document.getElementById('submitComplaintBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

            try {
                const formData = new FormData(this);
                formData.append('Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'Ø´ÙƒÙˆÙ‰ Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø©');
                formData.append('ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', new Date().toISOString().split('T')[0]);
                formData.append('ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', new Date().toISOString());

                if (userLocation) {
                    formData.append('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†', userLocation.address);
                }

                const success = await sendToFormspree(formData);

                if (success) {
                    showSuccessAnimation('complaint');
                    showComplaintMessage('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    saveUserData(null, formData.get('Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù'), formData.get('Ø§Ù„Ù‚Ø³Ù…'));
                    clearComplaintForm();
                } else {
                    showComplaintMessage('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showComplaintMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'ğŸ“ Ø¥Ø±Ø³Ø§Ù„';
            }
        });

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø¶ÙˆØ±
        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.classList.add('show');
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 4000);
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
        function showTaskMessage(text, type) {
            const messageEl = document.getElementById('taskMessage');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.classList.add('show');
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 4000);
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰
        function showComplaintMessage(text, type) {
            const messageEl = document.getElementById('complaintMessage');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.classList.add('show');
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 4000);
        }

        // Ù…Ø³Ø­ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±
        function clearAttendanceForm() {
            // Ù„Ù… Ù†Ø¹Ø¯ Ù†Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„ØŒ Ø¨Ù„ Ù†ØªØ±ÙƒÙ‡Ø§ Ù„Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
            // document.getElementById('employeeId').value = '';
            // document.getElementById('employeeName').value = '';
            // document.getElementById('department').value = '';
        }

        // Ù…Ø³Ø­ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù‡Ø§Ù…
        function clearTaskForm() {
            document.getElementById('taskEmployeeName').value = '';
            document.getElementById('taskDepartment').value = '';
            document.getElementById('taskDescription').value = '';
            const linksContainer = document.getElementById('taskLinksContainer');
            linksContainer.innerHTML = ''; // Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
            addLinkInput(); // Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø±Ø§Ø¨Ø· ÙˆØ§Ø­Ø¯ ÙØ§Ø±Øº Ù…Ù† Ø¬Ø¯ÙŠØ¯
        }

        // Ù…Ø³Ø­ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰
        function clearComplaintForm() {
            // Ù„Ø§ Ù†Ù…Ø³Ø­ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù ÙˆØ§Ù„Ù‚Ø³Ù…
            document.getElementById('complaintDescription').value = '';
        }


        // --- Ø­ÙØ¸ ÙˆØ§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ---
        function saveUserData(id, name, dept) {
            if (id) localStorage.setItem('guardx_employeeId', id);
            if (name) localStorage.setItem('guardx_employeeName', name);
            if (dept) localStorage.setItem('guardx_department', dept);
        }

        function loadSavedData() {
            const savedId = localStorage.getItem('guardx_employeeId');
            const savedName = localStorage.getItem('guardx_employeeName');
            const savedDept = localStorage.getItem('guardx_department');

            if (savedId) {
                document.getElementById('employeeId').value = savedId;
            }
            if (savedName) {
                document.getElementById('employeeName').value = savedName;
                document.getElementById('taskEmployeeName').value = savedName;
                document.getElementById('complaintEmployeeName').value = savedName;
            }
            if (savedDept) {
                document.getElementById('department').value = savedDept;
                document.getElementById('taskDepartment').value = savedDept;
                document.getElementById('complaintDepartment').value = savedDept;
            }
        }


        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙŠÙˆÙ… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        function getArabicDayName(dateString) {
            const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
            const date = new Date(dateString);
            return days[date.getDay()];
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø£Ø²Ø±Ø§Ø±
        document.getElementById('checkinBtn').addEventListener('click', checkIn);
        document.getElementById('checkoutBtn').addEventListener('click', checkOut);

        // Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø±Ø§Ø¨Ø· Ø¬Ø¯ÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
        document.getElementById('addLinkBtn').addEventListener('click', addLinkInput);

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø±Ø§Ø¨Ø· Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø²Ø± Ø§Ù„Ø­Ø°Ù
        function addLinkInput() {
            const linksContainer = document.getElementById('taskLinksContainer');
            
            const wrapper = document.createElement('div');
            wrapper.className = 'link-input-wrapper';

            const newInput = document.createElement('input');
            newInput.type = 'url';
            newInput.name = 'Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø£Ø¹Ù…Ø§Ù„[]';
            newInput.className = 'task-link-input';
            newInput.placeholder = 'Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§...';

            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.textContent = 'ğŸ—‘ï¸';
            removeBtn.className = 'btn remove-link-btn';
            removeBtn.onclick = function() {
                wrapper.remove();
            };

            wrapper.appendChild(newInput);
            wrapper.appendChild(removeBtn);
            linksContainer.appendChild(wrapper);
        }

        // Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ÙˆÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        addLinkInput();

        // --- Ø¯Ø§Ù„Ø© Ù„ØªÙˆØ³ÙŠØ¹ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ---
        const taskDescriptionTextarea = document.getElementById('taskDescription');

        function autoResizeTextarea() {
            this.style.height = 'auto'; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØµØ­ÙŠØ­
            this.style.height = (this.scrollHeight) + 'px'; // Ø¶Ø¨Ø· Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ù„ÙŠÙ†Ø§Ø³Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚
        taskDescriptionTextarea.addEventListener('input', autoResizeTextarea, false);

        const complaintDescriptionTextarea = document.getElementById('complaintDescription');
        complaintDescriptionTextarea.addEventListener('input', autoResizeTextarea, false);


        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        loadSavedData();


        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', function() {
            setTimeout(function() { // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø®ÙŠØ± Ù‚Ø¨Ù„ Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                const loadingOverlay = document.getElementById('loading-overlay');
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 500); // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ„Ø§Ø´ÙŠ
            }, 2000); // Ù…Ø¯Ø© Ø§Ù„ØªØ£Ø®ÙŠØ± Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ© (2 Ø«Ø§Ù†ÙŠØ©)
        });

        // ØªØ³Ø¬ÙŠÙ„ Ø¹Ø§Ù…Ù„ Ø§Ù„Ø®Ø¯Ù…Ø© (Service Worker)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
